(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17981],{789:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var r=s(31768),a=s(27252),i=s(28447),n=s(58799);let l=a.forwardRef((e,t)=>{let{className:s,indicatorClassName:a,value:l,...o}=e;return(0,r.jsx)(i.bL,{ref:t,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...o,children:(0,r.jsx)(i.C1,{className:(0,n.cn)("h-full w-full flex-1 bg-primary transition-all",a),style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});l.displayName=i.bL.displayName},12224:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>m,Es:()=>p,HM:()=>d,L3:()=>h,c7:()=>x,lG:()=>l,rr:()=>g,zM:()=>o});var r=s(31768);s(27252);var a=s(33124),i=s(1009),n=s(58799);function l(e){let{...t}=e;return(0,r.jsx)(a.bL,{"data-slot":"dialog",...t})}function o(e){let{...t}=e;return(0,r.jsx)(a.l9,{"data-slot":"dialog-trigger",...t})}function c(e){let{...t}=e;return(0,r.jsx)(a.ZL,{"data-slot":"dialog-portal",...t})}function d(e){let{...t}=e;return(0,r.jsx)(a.bm,{"data-slot":"dialog-close",...t})}function u(e){let{className:t,...s}=e;return(0,r.jsx)(a.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...s})}function m(e){let{className:t,children:s,size:l="md",...o}=e;return(0,r.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,r.jsx)(u,{}),(0,r.jsxs)(a.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200",{sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl","3xl":"sm:max-w-3xl","4xl":"sm:max-w-4xl","5xl":"sm:max-w-5xl","6xl":"sm:max-w-6xl","7xl":"sm:max-w-7xl"}[l],t),...o,children:[s,(0,r.jsxs)(a.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function x(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function p(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function h(e){let{className:t,...s}=e;return(0,r.jsx)(a.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",t),...s})}function g(e){let{className:t,...s}=e;return(0,r.jsx)(a.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...s})}},19299:(e,t,s)=>{"use strict";s.d(t,{S:()=>d});var r=s(31768);s(27252);var a=s(57795),i=s(13785),n=s(58799);let l={sm:"size-3",md:"size-4",lg:"size-5"},o={sm:"size-2.5",md:"size-3.5",lg:"size-4.5"},c={none:"rounded-none",sm:"rounded",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"};function d(e){let{className:t,size:s="md",radius:d="md",...u}=e;return(0,r.jsx)(a.bL,{"data-slot":"checkbox",className:(0,n.cn)(l[s],c[d],"peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive shrink-0 border shadow-2xs transition-shadow outline-hidden focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...u,children:(0,r.jsx)(a.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,r.jsx)(i.A,{className:o[s]})})})}},31724:(e,t,s)=>{"use strict";s.d(t,{A:()=>y});var r=s(31768),a=s(27252),i=s(99564),n=s(90439),l=s(69934),o=s(90840),c=s(94776),d=s(77864),u=s(54794),m=s(27518),x=s(1552),p=s(7068),h=s(52364),g=s(789),f=s(97400),v=s(14372);function y(e){let{token:t,onSuccess:s,onLoginClick:y,preserveToken:b=!1}=e,w=(0,v.useTranslations)("components/auth/reset-password-form"),{toast:j}=(0,h.dj)(),[N,_]=(0,a.useState)(""),[k,S]=(0,a.useState)(""),[A,C]=(0,a.useState)(!1),[P,E]=(0,a.useState)(!1),[T,z]=(0,a.useState)(!1),[F,I]=(0,a.useState)(!1),[L,M]=(0,a.useState)(!0),[G,R]=(0,a.useState)(!1),[$,q]=(0,a.useState)(null),[B,O]=(0,a.useState)(!1),[D,W]=(0,a.useState)(!1),[V,U]=(0,a.useState)(0),[H,Y]=(0,a.useState)("");(0,a.useEffect)(()=>{t?(M(!1),R(!0),q(null)):(M(!1),R(!1),q("No token provided"))},[t]),(0,a.useEffect)(()=>{if(!N){U(0),Y("");return}let e=0,t="";N.length>=8?e+=25:t="Password should be at least 8 characters",/[A-Z]/.test(N)?e+=25:t||(t="Add uppercase letters"),/[a-z]/.test(N)?e+=25:t||(t="Add lowercase letters"),/[0-9!@#$%^&*(),.?":{}|<>]/.test(N)?e+=25:t||(t="Add numbers or special characters"),100!==e||t?e>=75&&!t?t="Good password":e>=50&&!t?t="Fair password":t||(t="Weak password"):t="Strong password",U(e),Y(t)},[N]);let J=async e=>{if(e.preventDefault(),N!==k)return void j({title:"Passwords don't match",description:"Please make sure your passwords match.",variant:"destructive"});if(N.length<8)return void j({title:"Password too short",description:"Password must be at least 8 characters long.",variant:"destructive"});z(!0);try{let e=f.k.getState().resetPassword;if(await e(t,N))I(!0),j({title:"Password reset successful",description:"Your password has been reset. You can now log in with your new password."}),s&&s();else{let e=f.k.getState().error;e&&(e.includes("Invalid token")||e.includes("expired")||e.includes("used"))?(R(!1),q(e),j({title:"Invalid or expired token",description:e,variant:"destructive"})):j({title:"Reset failed",description:e||"An unexpected error occurred.",variant:"destructive"})}}catch(e){console.error("Password reset error:",e),j({title:"Reset error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{z(!1)}};return L?(0,r.jsxs)("div",{className:"space-y-6 text-center",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-primary/70",children:w("verifying_link")}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:[w("please_wait_while_we_verify_your_reset_link"),"."]})]}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:"h-12 w-12 border-3 border-primary border-t-transparent rounded-full animate-spin"})})]}):G?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2 text-center",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-primary/70",children:F?"Password reset":"Create new password"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:F?"Your password has been reset":"Enter your new password below"})]}),F?(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,r.jsx)("div",{className:"rounded-full bg-primary/10 p-4",children:(0,r.jsx)(l.A,{className:"h-10 w-10 text-primary"})})}),(0,r.jsxs)("div",{className:"p-5 bg-primary/5 rounded-lg border border-primary/20 mb-6 shine",children:[(0,r.jsxs)("p",{className:"text-sm",children:[w("your_password_has_been_successfully_reset"),"."]}),(0,r.jsxs)("p",{className:"text-sm mt-2",children:[w("you_can_now_log_in_with_your_new_password"),"."]})]}),(0,r.jsx)(x.$,{variant:"default",className:"mt-4 px-8 py-6 relative overflow-hidden btn-glow transition-all duration-300 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary",onClick:y,children:(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[w("return_to_login"),(0,r.jsx)(n.A,{className:"ml-2 h-4 w-4"})]})})]}):(0,r.jsxs)("form",{onSubmit:J,className:"space-y-5",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"relative transition-all duration-300 form-field-animate rounded-lg ".concat(B?"shadow-md ring-2 ring-primary/20":"ring-1 ring-input"),children:[(0,r.jsx)(p.p,{type:A?"text":"password",placeholder:"New Password",value:N,onChange:e=>_(e.target.value),required:!0,className:"border-0 pl-10 pr-10 py-6 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0",disabled:T,onFocus:()=>O(!0),onBlur:()=>O(!1)}),(0,r.jsx)(o.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 transition-colors ".concat(B?"text-primary":"text-muted-foreground")}),(0,r.jsx)("button",{type:"button",onClick:()=>C(!A),className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground hover:text-primary transition-colors",tabIndex:-1,children:A?(0,r.jsx)(c.A,{size:20}):(0,r.jsx)(d.A,{size:20})})]}),N&&(0,r.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-xs flex items-center",children:[(0,r.jsx)(u.A,{className:"h-3 w-3 mr-1 text-muted-foreground"}),(0,r.jsx)("span",{children:w("password_strength")})]}),(0,r.jsx)("div",{className:"text-xs",children:(0,r.jsx)("span",{className:"\n                        ".concat(V>=75?"text-green-500":"","\n                        ").concat(V>=50&&V<75?"text-yellow-500":"","\n                        ").concat(V>=25&&V<50?"text-orange-500":"","\n                        ").concat(V>0&&V<25?"text-red-500":"","\n                      "),children:H})})]}),(0,r.jsx)(g.k,{value:V,className:"h-1",indicatorClassName:V>=75?"bg-green-500":V>=50?"bg-yellow-500":V>=25?"bg-orange-500":"bg-red-500"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"relative transition-all duration-300 form-field-animate rounded-lg ".concat(D?"shadow-md ring-2 ring-primary/20":"ring-1 ring-input"," ").concat(k&&N!==k?"ring-destructive/50":""),children:[(0,r.jsx)(p.p,{type:P?"text":"password",placeholder:"Confirm Password",value:k,onChange:e=>S(e.target.value),required:!0,className:"border-0 pl-10 pr-10 py-6 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 ".concat(k&&N!==k?"text-destructive":""),disabled:T,onFocus:()=>W(!0),onBlur:()=>W(!1)}),(0,r.jsx)(o.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 transition-colors ".concat(D?"text-primary":"text-muted-foreground"," ").concat(k&&N!==k?"text-destructive":"")}),(0,r.jsx)("button",{type:"button",onClick:()=>E(!P),className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground hover:text-primary transition-colors",tabIndex:-1,children:P?(0,r.jsx)(c.A,{size:20}):(0,r.jsx)(d.A,{size:20})})]}),k&&N!==k&&(0,r.jsxs)("p",{className:"text-xs text-destructive mt-1 flex items-center",children:[(0,r.jsx)(i.A,{className:"h-3 w-3 mr-1"}),w("passwords_do_not_match")]})]}),(0,r.jsx)(x.$,{type:"submit",className:"w-full py-6 text-base relative overflow-hidden btn-glow transition-all duration-300 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary",disabled:T||!!k&&N!==k,children:T?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),w("resetting_password"),"."]}):(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[w("reset_password"),(0,r.jsx)(n.A,{className:"ml-2 h-4 w-4"})]})})]}),!F&&(0,r.jsx)("div",{className:"text-center text-sm",children:(0,r.jsxs)(x.$,{variant:"link",className:"p-0 h-auto inline-flex items-center",onClick:y,children:[(0,r.jsx)(m.A,{className:"mr-1 h-4 w-4"}),w("back_to_login")]})})]}):(0,r.jsxs)("div",{className:"space-y-6 text-center",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-primary/70",children:w("invalid_link")}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:[w("this_password_reset_link_is_invalid_or_has_expired"),"."]}),$&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-destructive/10 border border-destructive/20 rounded-lg text-sm text-destructive flex items-center justify-center",children:[(0,r.jsx)(i.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,r.jsx)("span",{children:$})]})]}),(0,r.jsx)(x.$,{onClick:y,className:"mt-4 py-6 px-8 relative overflow-hidden btn-glow transition-all duration-300 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary",children:(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[w("return_to_login"),(0,r.jsx)(n.A,{className:"ml-2 h-4 w-4"})]})})]})}},36391:()=>{},52364:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var r=s(27252);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}u.default=e=>u({...e,variant:"default"}),u.destructive=e=>u({...e,variant:"destructive"}),u.success=e=>u({...e,variant:"success"}),u.warning=e=>u({...e,variant:"warning"}),u.info=e=>u({...e,variant:"info"})},61579:(e,t,s)=>{"use strict";s.d(t,{U:()=>H});var r=s(31768),a=s(27252),i=s(12224),n=s(7734),l=s(1009),o=s(54794),c=s(90840),d=s(69934),u=s(33124),m=s(27116),x=s(94776),p=s(77864),h=s(1552),g=s(7068),f=s(97400),v=s(52364),y=s(19299);let b=()=>new Promise((e,t)=>{if(window.document.getElementById("google-auth-script"))return void e();let s=document.createElement("script");s.id="google-auth-script",s.src="https://accounts.google.com/gsi/client",s.async=!0,s.defer=!0,s.onload=()=>{e()},s.onerror=()=>{t(Error("Failed to load Google Auth script"))},document.body.appendChild(s)}),w=e=>new Promise((e,t)=>{try{b().then(()=>{let{google:s}=window;if(!s||!s.accounts)return void t(Error("Google accounts API not available"));e(s.accounts)}).catch(t)}catch(e){t(e)}}),j=async e=>new Promise((t,s)=>{if(!e)return void s(Error("Google Client ID is not configured"));let r=setTimeout(()=>{s(Error("Google authentication was cancelled or timed out"))},6e4);w(e).then(a=>{let i=!1;a.id.initialize({client_id:e,callback:e=>{if(!i){if(clearTimeout(r),i=!0,e.error)return void s(Error(e.error));if(e.credential)return void t(e.credential);s(Error("No credential received from Google"))}}}),a.id.cancel=()=>{i||(clearTimeout(r),i=!0,s(Error("Google authentication was cancelled")))};let n=document.createElement("div");n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n),a.id.renderButton(n,{theme:"outline",size:"large",type:"standard",shape:"rectangular",text:"signin_with",logo_alignment:"left",width:250}),setTimeout(()=>{let e=n.querySelector('[role="button"]');e?e.click():a.id.prompt(e=>{(e.isNotDisplayed()||e.isSkippedMoment()||e.isDismissedMoment())&&!i&&(clearTimeout(r),i=!0,s(Error("Google authentication was cancelled")))}),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},1e3)},100);let l=setInterval(()=>{i||document.querySelector('[data-onload="gis_loaded"]')||(clearTimeout(r),clearInterval(l),i=!0,s(Error("Google authentication popup was closed")))},1e3);setTimeout(()=>{clearInterval(l)},6e4)}).catch(e=>{clearTimeout(r),s(e)})});var N=s(8142),_=s(82415),k=s(14372);function S(e){let{onSuccess:t,onRegisterClick:s,onForgotPasswordClick:i,onWalletLoginClick:l}=e,o=(0,k.useTranslations)("components/auth/login-form");(0,_.rd)();let{toast:u}=(0,v.dj)(),b=(0,n.useSearchParams)();null==b||b.get("return");let w=(0,f.k)(e=>e.login),S=(0,f.k)(e=>e.isLoading),A=(0,f.k)(e=>e.error),[C,P]=(0,a.useState)(""),[E,T]=(0,a.useState)(""),[z,F]=(0,a.useState)(!1),[I,L]=(0,a.useState)(!1),[M,G]=(0,a.useState)(!1),[R,$]=(0,a.useState)(null),[q,B]=(0,a.useState)(!1),[O,D]=(0,a.useState)(!1),[W,V]=(0,a.useState)(!1),U=(0,a.useRef)(!1);(0,a.useEffect)(()=>()=>{try{R&&R.parentNode&&R.parentNode.removeChild(R);let e=document.querySelector(".grecaptcha-badge");e&&e.parentNode&&e.parentNode.removeChild(e)}catch(e){console.error("Error cleaning up reCAPTCHA:",e)}},[]),(0,a.useEffect)(()=>{A&&U.current&&(u({title:"Google login error",description:A||"An error occurred during Google login",variant:"destructive"}),U.current=!1,G(!1))},[A,u]);let H=async e=>{e.preventDefault(),L(!0);try{if(console.log("Login form submitted:",{email:C}),!C||!E){u({title:"Missing information",description:"Please enter both email and password.",variant:"destructive"}),L(!1);return}let e=await w(C,E).catch(e=>(console.error("Login promise rejection:",e),!1));if(console.log("Login result:",e),e){if(q&&1)try{localStorage.setItem("rememberedEmail",C)}catch(e){console.error("Error storing email in localStorage:",e)}else if(1)try{localStorage.removeItem("rememberedEmail")}catch(e){console.error("Error removing email from localStorage:",e)}{let e=new URL(window.location.href),t=e.searchParams.get("auth");"false"===t&&(e.searchParams.delete("auth"),window.history.replaceState({},"",e.toString()))}u({title:"Login successful",description:"Welcome back!"}),t&&t(),setTimeout(()=>{window.location.reload()},500)}else{let e=f.k.getState().error;u({title:"Login failed",description:e||"Invalid email or password.",variant:"destructive"})}}catch(e){console.error("Login error:",e),u({title:"Login error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{L(!1)}},Y=async e=>{if(e.preventDefault(),!S&&!M)try{G(!0),U.current=!0;let e=await j("758252507171-d0ohbm6ij1d3492s8h78m42oskupbu2l.apps.googleusercontent.com"),{data:s,error:r}=await (0,N.xq)({url:"/api/auth/login/google",method:"POST",body:{token:e}});if(r){u({title:"Google login error",description:r||"Failed to authenticate with Google. Please try again.",variant:"destructive"}),G(!1),U.current=!1;return}f.k.getState().setUser(s.user),u({title:"Login successful",description:"Welcome back!"}),t&&t(),setTimeout(()=>{window.location.reload()},500)}catch(t){console.error("Google login error:",t);let e=t instanceof Error?t.message:String(t);e.includes("cancelled")||e.includes("closed")||u({title:"Google login error",description:t instanceof Error?t.message:"Failed to initialize Google login. Please try again.",variant:"destructive"}),U.current=!1}finally{G(!1)}};(0,a.useEffect)(()=>{try{let e=localStorage.getItem("rememberedEmail");e&&(P(e),B(!0))}catch(e){console.error("Error reading from localStorage:",e)}},[]);let J=I||S;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2 text-center",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold",children:o("welcome_back")}),(0,r.jsx)("p",{className:"text-muted-foreground",children:o("enter_your_credentials_to_sign_in_to_your_account")})]}),(0,r.jsxs)("form",{onSubmit:H,className:"space-y-4",children:[(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"relative transition-all duration-200 ".concat(O?"transform -translate-y-1 shadow-md rounded-lg":""),children:[(0,r.jsx)(g.p,{type:"email",placeholder:"Email",value:C,onChange:e=>P(e.target.value),required:!0,className:"pl-10 py-6 transition-all",disabled:J,onFocus:()=>D(!0),onBlur:()=>D(!1)}),(0,r.jsx)(m.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 transition-colors ".concat(O?"text-primary":"text-muted-foreground")})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"relative transition-all duration-200 ".concat(W?"transform -translate-y-1 shadow-md rounded-lg":""),children:[(0,r.jsx)(g.p,{type:z?"text":"password",placeholder:"Password",value:E,onChange:e=>T(e.target.value),required:!0,className:"pl-10 pr-10 py-6 transition-all",disabled:J,onFocus:()=>V(!0),onBlur:()=>V(!1)}),(0,r.jsx)(c.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 transition-colors ".concat(W?"text-primary":"text-muted-foreground")}),(0,r.jsx)("button",{type:"button",onClick:()=>F(!z),className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground hover:text-primary transition-colors",tabIndex:-1,children:z?(0,r.jsx)(x.A,{size:20}):(0,r.jsx)(p.A,{size:20})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.S,{id:"remember-me",checked:q,onCheckedChange:e=>B(!0===e)}),(0,r.jsx)("label",{htmlFor:"remember-me",className:"text-sm text-muted-foreground cursor-pointer",children:o("remember_me")})]}),(0,r.jsx)(h.$,{variant:"link",className:"p-0 h-auto text-sm",onClick:i,type:"button",children:o("forgot_password")})]})]}),(0,r.jsx)(h.$,{type:"submit",className:"w-full py-6 text-base disabled:opacity-50 disabled:cursor-not-allowed",disabled:!!J||!C.trim()||!E,children:I?"Signing in...":"Sign in"}),!1]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:o("or_continue_with")})})]}),(0,r.jsxs)(h.$,{variant:"outline",className:"w-full py-6 text-base disabled:opacity-50 disabled:cursor-not-allowed",onClick:Y,disabled:!!J||M,children:[(0,r.jsx)("svg",{className:"mr-2 h-5 w-5","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:(0,r.jsx)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"})}),M?"Connecting...":"Continue with Google"]})]}),l&&(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)(h.$,{variant:"outline",className:"w-full py-6 text-base",onClick:l,disabled:!!J,children:[(0,r.jsx)("svg",{className:"mr-2 h-5 w-5","aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,r.jsx)("path",{fill:"currentColor",d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"})}),o("continue_with_wallet")]})}),(0,r.jsxs)("div",{className:"text-center text-xs text-muted-foreground",children:[(0,r.jsx)("p",{children:o("trusted_by_over_10000+_users_worldwide")}),(0,r.jsx)("div",{className:"flex justify-center mt-2 space-x-1",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)(d.A,{className:"h-3 w-3 text-primary"},t))})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[o("dont_have_an_account")," ",(0,r.jsx)(h.$,{variant:"link",className:"p-0 h-auto",onClick:s,children:o("sign_up")})]})})]})}var A=s(48440),C=s(74707),P=s(99564),E=s(90439),T=s(789);function z(e){let{onSuccess:t,onRegistrationSuccess:s,onLoginClick:i}=e,l=(0,k.useTranslations)("components/auth/register-form");(0,_.rd)();let o=(0,n.useSearchParams)(),{toast:u}=(0,v.dj)(),y=(0,f.k)(e=>e.register),b=(0,f.k)(e=>e.isLoading),w=(0,f.k)(e=>e.error),S=o.get("ref")||"",[z,F]=(0,a.useState)(""),[I,L]=(0,a.useState)(""),[M,G]=(0,a.useState)(""),[R,$]=(0,a.useState)(""),[q,B]=(0,a.useState)(""),[O,D]=(0,a.useState)(!1),[W,V]=(0,a.useState)(!1),[U,H]=(0,a.useState)(!1),[Y,J]=(0,a.useState)(null),[Z,X]=(0,a.useState)(0),[Q,K]=(0,a.useState)(""),[ee,et]=(0,a.useState)(!1),[es,er]=(0,a.useState)(!1),[ea,ei]=(0,a.useState)(!1),[en,el]=(0,a.useState)(!1),[eo,ec]=(0,a.useState)(!1),ed=(0,a.useRef)(!1);(0,a.useEffect)(()=>()=>{Y&&Y.parentNode&&Y.parentNode.removeChild(Y);let e=document.querySelector(".grecaptcha-badge");e&&e.parentNode&&e.parentNode.removeChild(e)},[]),(0,a.useEffect)(()=>{w&&ed.current&&(u({title:"Google login error",description:w,variant:"destructive"}),ed.current=!1)},[w,u]),(0,a.useEffect)(()=>{if(!R){X(0),K("");return}let e=0,t="",s=[];R.length>=8?e+=20:s.push("at least 8 characters"),/[A-Z]/.test(R)?e+=20:s.push("uppercase letters"),/[a-z]/.test(R)?e+=20:s.push("lowercase letters"),/\d/.test(R)?e+=20:s.push("numbers"),/\W/.test(R)?e+=20:s.push("special characters"),0===s.length?(t="Strong password",e=100):t=1===s.length?"Add ".concat(s[0]):2===s.length?"Add ".concat(s.join(" and ")):"Add ".concat(s.slice(0,-1).join(", ")," and ").concat(s[s.length-1]),X(e),K(t)},[R]);let eu=async e=>{e.preventDefault();let r=RegExp("^[\\p{L} \\-'.]+$","u");if(!z.trim()||!r.test(z.trim()))return void u({title:"Invalid first name",description:"First name can only contain letters, spaces, hyphens, apostrophes, and periods.",variant:"destructive"});if(!I.trim()||!r.test(I.trim()))return void u({title:"Invalid last name",description:"Last name can only contain letters, spaces, hyphens, apostrophes, and periods.",variant:"destructive"});if(R!==q)return void u({title:"Passwords don't match",description:"Please make sure your passwords match.",variant:"destructive"});if(R.length<8)return void u({title:"Password too short",description:"Password must be at least 8 characters long.",variant:"destructive"});if(!/[A-Z]/.test(R))return void u({title:"Password missing uppercase",description:"Password must contain at least one uppercase letter.",variant:"destructive"});if(!/[a-z]/.test(R))return void u({title:"Password missing lowercase",description:"Password must contain at least one lowercase letter.",variant:"destructive"});if(!/\d/.test(R))return void u({title:"Password missing numbers",description:"Password must contain at least one number.",variant:"destructive"});if(!/\W/.test(R))return void u({title:"Password missing special characters",description:"Password must contain at least one special character.",variant:"destructive"});H(!0);try{let e=await y({firstName:z,lastName:I,email:M,password:R,ref:S||void 0});if(console.log("Registration result:",e),console.log("User store error:",f.k.getState().error),e.success)if(e.userLoggedIn)u({title:"Registration successful",description:"Welcome to our platform!"}),t&&t(),setTimeout(()=>{window.location.reload()},500);else if(s)s(M,!0);else{var a;u({title:"Registration successful",description:(null==(a=e.data)?void 0:a.message)||"Please check your email to verify your account."}),t&&t()}else{let e=f.k.getState().error;console.error("Registration error:",e);let t=e||"An unexpected error occurred.";(null==e?void 0:e.includes("lastName:"))||(null==e?void 0:e.includes("firstName:"))?t="Please check your name format. Names can only contain letters, spaces, hyphens, apostrophes, and periods.":(null==e?void 0:e.includes("Email already in use"))?t="This email is already registered. Please try logging in instead.":(null==e?void 0:e.includes("Invalid password format"))&&(t="Password must be at least 8 characters with uppercase, lowercase, numbers, and special characters."),u({title:"Registration failed",description:t,variant:"destructive"})}}catch(e){u({title:"Registration error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{H(!1)}},em=async e=>{if(e.preventDefault(),!b&&!U)try{H(!0),ed.current=!0;let e=await j("758252507171-d0ohbm6ij1d3492s8h78m42oskupbu2l.apps.googleusercontent.com"),{data:s,error:r}=await (0,N.xq)({url:"/api/auth/register/google",method:"POST",body:{token:e,ref:S}});if(r){u({title:"Google registration error",description:r||"Failed to register with Google. Please try again.",variant:"destructive"}),H(!1),ed.current=!1;return}f.k.getState().setUser(s.user),u({title:"Registration successful",description:"Welcome to our platform!"}),t&&t(),setTimeout(()=>{window.location.reload()},500)}catch(t){console.error("Google registration error:",t);let e=t instanceof Error?t.message:String(t);e.includes("cancelled")||e.includes("closed")||u({title:"Google registration error",description:t instanceof Error?t.message:"Failed to initialize Google registration. Please try again.",variant:"destructive"}),ed.current=!1}finally{H(!1)}},ex=U||b&&ed.current;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2 text-center",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-primary/70",children:l("create_an_account")}),(0,r.jsx)("p",{className:"text-muted-foreground",children:l("enter_your_details_to_create_your_account")})]}),(0,r.jsxs)("form",{onSubmit:eu,className:"space-y-5",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"relative transition-all duration-300 form-field-animate rounded-lg ".concat(ee?"shadow-md ring-2 ring-primary/20":!z||z.trim()&&RegExp("^[\\p{L} \\-'.]+$","u").test(z.trim())?"ring-1 ring-input":"ring-1 ring-destructive/50"),children:[(0,r.jsx)(g.p,{type:"text",placeholder:"First Name",value:z,onChange:e=>F(e.target.value),required:!0,className:"border-0 pl-10 py-6 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 text-base",disabled:ex,onFocus:()=>et(!0),onBlur:()=>et(!1)}),(0,r.jsx)(A.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 transition-colors ".concat(ee?"text-primary":"text-muted-foreground")})]}),(0,r.jsxs)("div",{className:"relative transition-all duration-300 form-field-animate rounded-lg ".concat(es?"shadow-md ring-2 ring-primary/20":!I||I.trim()&&RegExp("^[\\p{L} \\-'.]+$","u").test(I.trim())?"ring-1 ring-input":"ring-1 ring-destructive/50"),children:[(0,r.jsx)(g.p,{type:"text",placeholder:"Last Name",value:I,onChange:e=>L(e.target.value),required:!0,className:"border-0 pl-10 py-6 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 text-base",disabled:ex,onFocus:()=>er(!0),onBlur:()=>er(!1)}),(0,r.jsx)(A.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 transition-colors ".concat(es?"text-primary":"text-muted-foreground")})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"relative transition-all duration-300 form-field-animate rounded-lg ".concat(ea?"shadow-md ring-2 ring-primary/20":M&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M)?"ring-1 ring-destructive/50":"ring-1 ring-input"),children:[(0,r.jsx)(g.p,{type:"email",placeholder:"Email",value:M,onChange:e=>G(e.target.value),required:!0,className:"border-0 pl-10 py-6 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 text-base",disabled:ex,onFocus:()=>ei(!0),onBlur:()=>ei(!1)}),(0,r.jsx)(m.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 transition-colors ".concat(ea?"text-primary":"text-muted-foreground")})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"relative transition-all duration-300 form-field-animate rounded-lg ".concat(en?"shadow-md ring-2 ring-primary/20":R&&Z<100?"ring-1 ring-destructive/50":"ring-1 ring-input"),children:[(0,r.jsx)(g.p,{type:O?"text":"password",placeholder:"Password",value:R,onChange:e=>$(e.target.value),required:!0,className:"border-0 pl-10 pr-10 py-6 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0",disabled:ex,onFocus:()=>el(!0),onBlur:()=>el(!1)}),(0,r.jsx)(c.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 transition-colors ".concat(en?"text-primary":"text-muted-foreground")}),(0,r.jsx)("button",{type:"button",onClick:()=>D(!O),className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground hover:text-primary transition-colors",tabIndex:-1,children:O?(0,r.jsx)(x.A,{size:20}):(0,r.jsx)(p.A,{size:20})})]}),(0,r.jsxs)("div",{className:"space-y-2 mt-2",children:[!R&&(0,r.jsxs)("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center mb-1",children:[(0,r.jsx)(C.A,{className:"h-3 w-3 mr-1"}),(0,r.jsx)("span",{className:"font-medium",children:"Password must contain:"})]}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-0.5 ml-4 text-xs",children:[(0,r.jsx)("li",{children:"At least 8 characters"}),(0,r.jsx)("li",{children:"One uppercase letter"}),(0,r.jsx)("li",{children:"One lowercase letter"}),(0,r.jsx)("li",{children:"One number"}),(0,r.jsx)("li",{children:"One special character"})]})]}),R&&(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-xs flex items-center",children:[(0,r.jsx)(C.A,{className:"h-3 w-3 mr-1 text-muted-foreground"}),(0,r.jsx)("span",{children:l("password_strength")})]}),(0,r.jsx)("div",{className:"text-xs",children:(0,r.jsx)("span",{className:"\n                        ".concat(100===Z?"text-green-500":"","\n                        ").concat(Z>=60&&Z<100?"text-yellow-500":"","\n                        ").concat(Z>=20&&Z<60?"text-orange-500":"","\n                        ").concat(Z>0&&Z<20?"text-red-500":"","\n                      "),children:Q})})]}),(0,r.jsx)(T.k,{value:Z,className:"h-1",indicatorClassName:Z>=75?"bg-green-500":Z>=50?"bg-yellow-500":Z>=25?"bg-orange-500":"bg-red-500"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"relative transition-all duration-300 form-field-animate rounded-lg ".concat(eo?"shadow-md ring-2 ring-primary/20":"ring-1 ring-input"," ").concat(q&&R!==q?"ring-destructive/50":""),children:[(0,r.jsx)(g.p,{type:W?"text":"password",placeholder:"Confirm Password",value:q,onChange:e=>B(e.target.value),required:!0,className:"border-0 pl-10 pr-10 py-6 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 ".concat(q&&R!==q?"text-destructive":""),disabled:ex,onFocus:()=>ec(!0),onBlur:()=>ec(!1)}),(0,r.jsx)(c.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 transition-colors ".concat(eo?"text-primary":"text-muted-foreground"," ").concat(q&&R!==q?"text-destructive":"")}),(0,r.jsx)("button",{type:"button",onClick:()=>V(!W),className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground hover:text-primary transition-colors",tabIndex:-1,children:W?(0,r.jsx)(x.A,{size:20}):(0,r.jsx)(p.A,{size:20})})]}),q&&R!==q&&(0,r.jsxs)("p",{className:"text-xs text-destructive mt-1 flex items-center",children:[(0,r.jsx)(P.A,{className:"h-3 w-3 mr-1"}),l("passwords_do_not_match")]})]}),S&&(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"relative p-4 bg-primary/5 border border-primary/20 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-primary font-medium mr-2",children:l("#")}),(0,r.jsx)("span",{children:S})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:l("referral_code_applied")})]})}),(0,r.jsx)(h.$,{type:"submit",className:"w-full py-6 text-base relative overflow-hidden btn-glow transition-all duration-300 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary disabled:opacity-50 disabled:cursor-not-allowed",disabled:ex||!(()=>{if(!z.trim()||!I.trim()||!M.trim()||!R||!q)return!1;let e=RegExp("^[\\p{L} \\-'.]+$","u");return!!e.test(z.trim())&&!!e.test(I.trim())&&R===q&&!(R.length<8)&&!!/[A-Z]/.test(R)&&!!/[a-z]/.test(R)&&!!/\d/.test(R)&&!!/\W/.test(R)&&!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M)})(),children:U?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l("creating_account"),"."]}):(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[l("create_account"),(0,r.jsx)(E.A,{className:"ml-2 h-4 w-4"})]})}),!1]}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:l("or_continue_with")})})]}),(0,r.jsxs)(h.$,{variant:"outline",className:"w-full py-6 text-base relative overflow-hidden group disabled:opacity-50 disabled:cursor-not-allowed",onClick:em,disabled:ex,children:[(0,r.jsx)("span",{className:"absolute inset-0 w-full h-full transition-all duration-300 ease-out transform translate-x-0 -skew-x-12 bg-gradient-to-r from-primary/10 to-transparent group-hover:translate-x-full group-hover:-skew-x-12"}),(0,r.jsx)("span",{className:"absolute inset-0 w-full h-full transition-all duration-300 ease-out transform skew-x-12 bg-gradient-to-r from-transparent to-primary/10 group-hover:translate-x-full group-hover:skew-x-12"}),(0,r.jsxs)("span",{className:"relative flex items-center justify-center",children:[(0,r.jsx)("svg",{className:"mr-2 h-5 w-5","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:(0,r.jsx)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"})}),b&&ed.current?"Connecting...":"Continue with Google"]})]})]}),(0,r.jsxs)("div",{className:"text-center text-xs text-muted-foreground",children:[(0,r.jsx)("p",{children:l("join_over_10000+_users_worldwide")}),(0,r.jsx)("div",{className:"flex justify-center mt-2 space-x-1",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)(d.A,{className:"h-3 w-3 text-primary"},t))})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[l("already_have_an_account")," ",(0,r.jsx)(h.$,{variant:"link",className:"p-0 h-auto font-semibold",onClick:i,children:l("sign_in")})]})})]})}var F=s(39e3);function I(e){let{email:t,needsEmailVerification:s,onLoginClick:a,onClose:i}=e,n=(0,k.useTranslations)("components/auth/register-success");return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-6 text-center space-y-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center animate-pulse",children:(0,r.jsx)(d.A,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),(0,r.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,r.jsx)(F.A,{className:"w-6 h-6 text-yellow-500 animate-bounce"})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:n("registration_successful")}),(0,r.jsx)("p",{className:"text-muted-foreground max-w-md",children:n(s?"welcome_your_account_has":"welcome_your_account_is_ready_to_use")})]}),s?(0,r.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 max-w-md",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(m.A,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),(0,r.jsxs)("div",{className:"text-left space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:n("verify_your_email")}),(0,r.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[n("weve_sent_a_verification_email_to")," ",(0,r.jsx)("strong",{children:t}),".",n("please_check_your")]}),(0,r.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:n("dont_see_the_email_check_your_spam_folder")})]})]})}):(0,r.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 max-w-md",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(d.A,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("h3",{className:"font-semibold text-green-900 dark:text-green-100",children:n("account_ready")}),(0,r.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300",children:n("your_account_is_fully_activated_and_ready_to_use")})]})]})}),(0,r.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-md",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.$,{onClick:a,variant:"outline",className:"flex-1 flex items-center justify-center space-x-2",children:[(0,r.jsx)("span",{children:n("go_to_login")}),(0,r.jsx)(E.A,{className:"w-4 h-4"})]}),(0,r.jsx)(h.$,{onClick:i,variant:"default",className:"flex-1",children:n("Close")})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.$,{onClick:a,variant:"default",className:"flex-1 flex items-center justify-center space-x-2",children:[(0,r.jsx)("span",{children:n("continue_to_login")}),(0,r.jsx)(E.A,{className:"w-4 h-4"})]}),(0,r.jsx)(h.$,{onClick:i,variant:"outline",className:"flex-1",children:n("Close")})]})}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground max-w-md",children:s?(0,r.jsx)("p",{children:n("after_verifying_your_email")}):(0,r.jsx)("p",{children:n("you_can_now_log")})})]})}var L=s(38751),M=s(27518);function G(e){let{onSuccess:t,onLoginClick:s,onTokenSubmit:i}=e,n=(0,k.useTranslations)("components/auth/forgot-password-form"),{toast:l}=(0,v.dj)(),[o,c]=(0,a.useState)(""),[u,x]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),[_,S]=(0,a.useState)(!1),[A,C]=(0,a.useState)(!1),[T,z]=(0,a.useState)(null),F=async e=>{e.preventDefault(),f(!0),z(null);try{let e=await (0,N.xq)({url:"/api/auth/reset",method:"POST",body:{email:o},successMessage:"Reset link sent"});e.data?(j(!0),l({title:"Reset link sent",description:"If an account exists with that email, you'll receive a password reset link."}),t&&t()):(z(e.error||"Failed to send reset link"),l({title:"Request failed",description:e.error||"An unexpected error occurred.",variant:"destructive"}))}catch(e){console.error("Password reset request error:",e),z("An unexpected error occurred"),l({title:"Request error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{f(!1)}},I=async e=>{if(e.preventDefault(),z(null),!u.trim()){z("Token is required"),l({title:"Token required",description:"Please enter the reset token from your email.",variant:"destructive"});return}b(!0);try{var t;let e=await (0,N.xq)({url:"/api/auth/verify/reset",method:"POST",body:{token:u}});(null==(t=e.data)?void 0:t.success)?i&&i(u):(z(e.error||"Invalid token"),l({title:"Invalid token",description:e.error||"The token is invalid or has expired. Please request a new one.",variant:"destructive"}))}catch(e){console.error("Token verification error:",e),z("Failed to verify token"),l({title:"Verification error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{b(!1)}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2 text-center",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-primary/70",children:w?"Check your email":"Forgot password"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:w?"We've sent you a reset link. You can also enter the token below.":"Enter your email and we'll send you a reset link"})]}),T&&(0,r.jsxs)("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg text-sm text-destructive flex items-center",children:[(0,r.jsx)(P.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,r.jsx)("span",{children:T})]}),w?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,r.jsx)("div",{className:"rounded-full bg-primary/10 p-4",children:(0,r.jsx)(d.A,{className:"h-8 w-8 text-primary"})})}),(0,r.jsxs)("div",{className:"p-5 bg-primary/5 rounded-lg border border-primary/20 mb-4 shine",children:[(0,r.jsxs)("p",{className:"text-sm",children:[n("weve_sent_a_password_reset_link_to"),(0,r.jsx)("strong",{children:o})]}),(0,r.jsxs)("p",{className:"text-sm mt-2",children:[n("please_check_your_token_below"),"."]})]}),(0,r.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"relative transition-all duration-300 form-field-animate rounded-lg ".concat(A?"shadow-md ring-2 ring-primary/20":"ring-1 ring-input"),children:[(0,r.jsx)(g.p,{type:"text",placeholder:"Enter reset token",value:u,onChange:e=>x(e.target.value),required:!0,className:"border-0 pl-10 py-6 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0",disabled:y,onFocus:()=>C(!0),onBlur:()=>C(!1)}),(0,r.jsx)(L.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 transition-colors ".concat(A?"text-primary":"text-muted-foreground")})]})}),(0,r.jsx)(h.$,{type:"submit",className:"w-full py-6 text-base relative overflow-hidden btn-glow transition-all duration-300 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary",disabled:y,children:y?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n("verifying_token"),"."]}):(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[n("verify_token"),(0,r.jsx)(E.A,{className:"ml-2 h-4 w-4"})]})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,r.jsx)(h.$,{variant:"outline",className:"px-4 py-2 relative overflow-hidden group",onClick:()=>j(!1),children:(0,r.jsxs)("span",{className:"relative z-10 flex items-center",children:[(0,r.jsx)(M.A,{className:"mr-2 h-4 w-4"}),n("try_another_email")]})}),(0,r.jsx)(h.$,{variant:"ghost",className:"px-4 py-2",onClick:s,type:"button",children:n("return_to_login")})]})]}):(0,r.jsxs)("form",{onSubmit:F,className:"space-y-5",children:[(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"relative transition-all duration-300 form-field-animate rounded-lg ".concat(_?"shadow-md ring-2 ring-primary/20":"ring-1 ring-input"),children:[(0,r.jsx)(g.p,{type:"email",placeholder:"Email address",value:o,onChange:e=>c(e.target.value),required:!0,className:"border-0 pl-10 py-6 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0",disabled:p,onFocus:()=>S(!0),onBlur:()=>S(!1)}),(0,r.jsx)(m.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 transition-colors ".concat(_?"text-primary":"text-muted-foreground")})]})}),(0,r.jsx)(h.$,{type:"submit",className:"w-full py-6 text-base relative overflow-hidden btn-glow transition-all duration-300 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary",disabled:p,children:p?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n("sending_reset_link"),"."]}):(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[n("send_reset_link"),(0,r.jsx)(E.A,{className:"ml-2 h-4 w-4"})]})})]}),!w&&(0,r.jsx)("div",{className:"text-center text-sm",children:(0,r.jsxs)(h.$,{variant:"link",className:"p-0 h-auto inline-flex items-center",onClick:s,children:[(0,r.jsx)(M.A,{className:"mr-1 h-4 w-4"}),n("back_to_login")]})})]})}var R=s(31724),$=s(54958),q=s(81662),B=s(78304),O=s(84034),D=s(90833),W=s(65536);function V(e){let{onSuccess:t}=e,{toast:i}=(0,v.dj)(),[n,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),d=(0,f.k)(e=>e.setUser),{open:u}=(0,W.JS)(),m=(0,W.G8)(),x=(0,W.HV)(),p=async()=>{if(!m.isConnected){try{l(!0),c(null);let e=await u({view:"Connect"});if(void 0===e)return void l(!1);"success"in e&&!e.success&&(e.userRejected?console.log("User rejected wallet connection"):e.noWallet?(i({title:"Wallet not found",description:"Please install MetaMask or another Ethereum wallet to continue.",variant:"destructive"}),c("No wallet detected. Please install MetaMask or another Ethereum wallet.")):(i({title:"Connection error",description:e.error||"Failed to connect wallet. Please try again.",variant:"destructive"}),c(e.error||"Failed to connect wallet")))}catch(e){console.error("Unexpected error during wallet connection:",e),i({title:"Connection error",description:"An unexpected error occurred. Please try again.",variant:"destructive"}),c("An unexpected error occurred")}finally{l(!1)}return}if(!m.address)return void i({title:"Wallet error",description:"No wallet address found. Please reconnect your wallet.",variant:"destructive"});l(!0),c(null);try{let e,r,a;if(!window.ethereum)throw Error("Ethereum provider not found. Please install MetaMask.");let n=await s.e(24739).then(s.bind(s,24739));"function"==typeof n.BrowserProvider?(e=new n.BrowserProvider(window.ethereum),r=await e.getSigner()):r=(e=new n.default.providers.Web3Provider(window.ethereum)).getSigner(),a=await r.getAddress(),console.log("Using checksum address:",a);let l=window.location.host,o=window.location.origin,u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s="",r=t.length;for(let a=0;a<e;a++)s+=t.charAt(Math.floor(Math.random()*r));return s}(32),m=Number.parseInt(String(x.chainId||"1"));console.log("Using nonce:",u);let p=new O.SiweMessage({domain:l,address:a,statement:"Sign in with Ethereum to P2P Platform",uri:o,version:"1",chainId:m,nonce:u}).prepareMessage(),h=await r.signMessage(p),g=await fetch("/api/auth/login/wallet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:p,signature:h})}),f=await g.json();g.ok?f.user&&(d(f.user),i({title:"Login successful",description:"You have been successfully logged in with your wallet."}),t&&t()):(c(f.error||"Authentication failed"),i({title:"Authentication failed",description:f.error||"Failed to authenticate with wallet",variant:"destructive"}))}catch(t){var e,r;console.error("Wallet login error:",t),"Nonce size smaller then 8 characters or is not alphanumeric."===t.type||t.message&&t.message.includes("Nonce")?(c("Authentication error. Please try again."),i({title:"Authentication error",description:"There was an issue with the authentication process. Please try again.",variant:"destructive"})):"Invalid address."===t.type||t.message&&t.message.includes("Invalid address")||t.expected&&t.received?(c("Address format error. Please try again."),i({title:"Address format error",description:"There was an issue with your wallet address format. Please try again.",variant:"destructive"})):4001===t.code||(null==(e=t.message)?void 0:e.includes("user rejected"))||(null==(r=t.message)?void 0:r.includes("user denied"))?(c("You declined to sign the authentication message"),i({title:"Authentication cancelled",description:"You declined to sign the authentication message."})):(c(t.message||"An unexpected error occurred"),i({title:"Login error",description:t.message||"An unexpected error occurred",variant:"destructive"}))}finally{l(!1)}};return(0,r.jsx)(h.$,{onClick:p,className:"w-full py-6 text-base relative overflow-hidden btn-glow transition-all duration-300 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary",disabled:n,children:n?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m.isConnected?"Signing in...":"Connecting wallet..."]}):(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsx)($.A,{className:"mr-2 h-5 w-5"}),m.isConnected?"Sign in with wallet":"Connect wallet",(0,r.jsx)(E.A,{className:"ml-2 h-4 w-4"})]})})}function U(e){let{onSuccess:t,onCancel:s}=e,i=(0,k.useTranslations)("components/auth/wallet-login-form"),[n,l]=(0,a.useState)(null),c=(0,W.G8)(),[d,u]=(0,a.useState)(null);return(0,a.useEffect)(()=>{c.address?u(c.address):u(null)},[c.address]),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2 text-center",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"rounded-full bg-primary/10 p-3",children:(0,r.jsx)($.A,{className:"h-8 w-8 text-primary"})})}),(0,r.jsx)("h2",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-primary/70",children:i("wallet_login")}),(0,r.jsx)("p",{className:"text-muted-foreground",children:i("connect_your_wallet_to_sign_in_securely")})]}),n&&(0,r.jsxs)("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-lg text-sm text-destructive flex items-center",children:[(0,r.jsx)(P.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,r.jsx)("span",{children:n})]}),c.isConnected&&d?(0,r.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-teal-50 dark:from-green-950/30 dark:to-teal-950/30 rounded-xl p-6 border border-green-100 dark:border-green-900",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"bg-green-100 dark:bg-green-900/50 p-3 rounded-full",children:(0,r.jsx)($.A,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-green-900 dark:text-green-300",children:i("wallet_connected")}),(0,r.jsxs)("p",{className:"text-green-700 dark:text-green-400",children:[i("your_wallet_is_connected"),". ",i("address"),d.slice(0,6),d.slice(-4)]}),(0,r.jsxs)("p",{className:"text-green-700 dark:text-green-400",children:[i("click_the_button_below_to_sign_in_with_your_wallet"),"."]})]})]})}):(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30 rounded-xl p-6 border border-blue-100 dark:border-blue-900",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/50 p-3 rounded-full",children:(0,r.jsx)($.A,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-blue-900 dark:text-blue-300",children:i("connect_your_crypto_wallet")}),(0,r.jsxs)("p",{className:"text-blue-700 dark:text-blue-400",children:[i("link_your_wallet_secure_transactions"),"."]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,r.jsxs)(D.E,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/50 dark:text-blue-300 dark:border-blue-800",children:[(0,r.jsx)(o.A,{className:"h-3 w-3 mr-1"}),i("Secure")]}),(0,r.jsxs)(D.E,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/50 dark:text-blue-300 dark:border-blue-800",children:[(0,r.jsx)(q.A,{className:"h-3 w-3 mr-1"}),i("Fast")]}),(0,r.jsxs)(D.E,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/50 dark:text-blue-300 dark:border-blue-800",children:[(0,r.jsx)(B.A,{className:"h-3 w-3 mr-1"}),i("Multi-chain")]})]})]})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(V,{onSuccess:t}),(0,r.jsx)(h.$,{variant:"ghost",onClick:s,className:"w-full",children:i("Cancel")})]}),(0,r.jsx)("div",{className:"text-center text-xs text-muted-foreground",children:(0,r.jsxs)("p",{children:[i("by_connecting_your_privacy_policy"),"."]})}),(0,r.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 border border-blue-100 dark:border-blue-900 rounded-lg text-sm text-blue-700 dark:text-blue-400 flex items-start",children:[(0,r.jsx)(C.A,{className:"h-4 w-4 mr-2 flex-shrink-0 mt-0.5 text-blue-500"}),(0,r.jsxs)("span",{children:[i("youll_need_to_approve_two_requests_in_your_wallet"),(0,r.jsxs)("ol",{className:"list-decimal ml-5 mt-1 space-y-1",children:[(0,r.jsx)("li",{children:i("first_to_connect_your_wallet")}),(0,r.jsx)("li",{children:i("then_to_sign_a_message_proving_you_own_the_wallet")})]})]})]})]})}function H(e){let{isOpen:t,onClose:s,initialView:m,onViewChange:x,returnTo:p}=e,h=(0,k.useTranslations)("components/auth/auth-modal"),[g,f]=(0,a.useState)(m),v=(0,n.useSearchParams)(),y=(0,_.rd)(),[b,w]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[A,C]=(0,a.useState)(!0),[P,E]=(0,a.useState)(null);(0,a.useEffect)(()=>{try{let e=null==v?void 0:v.get("token");e&&(w(e),f("reset-password"),x&&x("reset-password"))}catch(e){console.error("Error checking for reset token:",e),N("Failed to process reset token from URL")}},[v,x]),(0,a.useEffect)(()=>{try{f(m)}catch(e){console.error("Error in AuthModal useEffect:",e),N("Failed to update view")}},[m]),(0,a.useEffect)(()=>{C(!1);let e=setTimeout(()=>C(!0),50);return()=>clearTimeout(e)},[g]);let T=e=>{try{C(!1),setTimeout(()=>{f(e),x&&x(e),C(!0)},150)}catch(e){console.error("Error in handleViewChange:",e),N("Failed to change view")}},F=()=>{try{let t=new URL(window.location.href),r=t.searchParams.get("auth");if("false"===r&&(t.searchParams.delete("auth"),t.searchParams.delete("return"),window.history.replaceState({},"",t.toString())),p&&p.startsWith("/")){var e;let t=((e="af, sq, am, ar, hy, as, az, bn, bs, bg, yue, ca, hr, cs, da, dv, nl, en, et, fj, fil, fi, fr, gl, ka, de, el, gu, ht, hi, hu, is, id, ga, it, ja, kn, kk, km, ko, lv, lt, mk, ms, ml, mt, mr, nb, fa, pl, pt, pa, ro, ru, sk, sl, es, sw, sv, ta, te, th, tr, uk, ur, vi, cy, zu",void 0===e)?void 0:e.split(", "))||[],r=p,a=p.split("/").filter(Boolean);a.length>0&&t.includes(a[0])&&(r="/"+a.slice(1).join("/")),y.push(r),s()}else if("reset-password"===g&&b){let e=window.location.pathname;y.replace(e),s()}else s()}catch(e){console.error("Error in handleSuccess:",e),N("Failed to process successful action"),"forgot-password"!==g&&s()}},L=()=>{try{s()}catch(e){console.error("Error in handleClose:",e),s()}},M=()=>{try{T("login")}catch(e){console.error("Error in handleLoginClick:",e),N("Failed to return to login")}};return(0,r.jsxs)(i.lG,{open:t,onOpenChange:L,children:[(0,r.jsx)(u.hJ,{className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 bg-gradient-to-br from-blue-900/20 via-slate-900/40 to-blue-800/20"}),(0,r.jsxs)(i.Cf,{className:"sm:max-w-xl p-0 border-none shadow-2xl rounded-xl w-[95vw] sm:w-full max-h-[90vh] overflow-hidden bg-gradient-to-b from-background to-background/95 backdrop-blur-sm",children:[(0,r.jsx)(i.L3,{children:(0,r.jsx)("span",{className:"sr-only",children:"Authentication"})}),(0,r.jsx)(i.rr,{children:(0,r.jsx)("span",{className:"sr-only",children:"Sign in or create an account securely."})}),(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,r.jsx)("div",{className:"absolute -top-24 -left-24 w-64 h-64 bg-primary/10 rounded-full blur-3xl"}),(0,r.jsx)("div",{className:"absolute -bottom-24 -right-24 w-64 h-64 bg-primary/10 rounded-full blur-3xl"})]}),(0,r.jsxs)(u.bm,{className:"hidden absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]}),j&&(0,r.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg mx-6 mt-6 relative z-10",role:"alert",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,r.jsx)("span",{className:"block sm:inline text-sm",children:j})]}),(0,r.jsxs)("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3 text-destructive/70 hover:text-destructive transition-colors",onClick:()=>N(null),children:[(0,r.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,r.jsx)("span",{"aria-hidden":"true",children:h("\xd7")})]})]}),(0,r.jsxs)("div",{className:"max-h-[90vh] pb-8 overflow-y-auto scrollbar-hide auth-modal-content ".concat(A?"opacity-100":"opacity-0"),children:["forgot-password"===g?(0,r.jsx)("div",{className:"p-8",children:(0,r.jsx)(G,{onSuccess:F,onLoginClick:M,onTokenSubmit:e=>{try{w(e),T("reset-password")}catch(e){console.error("Error in handleTokenSubmit:",e),N("Failed to process token")}}})}):"reset-password"===g?(0,r.jsx)("div",{className:"p-8",children:(0,r.jsx)(R.A,{token:b||"",onSuccess:F,onLoginClick:M,preserveToken:!0})}):"wallet-login"===g?(0,r.jsx)("div",{className:"p-8",children:(0,r.jsx)(U,{onSuccess:F,onCancel:M})}):(0,r.jsx)("div",{className:"p-8",children:"login"===g?(0,r.jsx)(S,{onSuccess:F,onRegisterClick:()=>T("register"),onForgotPasswordClick:()=>T("forgot-password"),onWalletLoginClick:()=>T("wallet-login")}):"register"===g?(0,r.jsx)(z,{onSuccess:F,onRegistrationSuccess:(e,t)=>{try{E({email:e,needsEmailVerification:t}),T("register-success")}catch(e){console.error("Error in handleRegistrationSuccess:",e),N("Failed to process registration success")}},onLoginClick:M}):(0,r.jsx)(I,{email:(null==P?void 0:P.email)||"",needsEmailVerification:(null==P?void 0:P.needsEmailVerification)||!1,onLoginClick:M,onClose:L})}),("login"===g||"register"===g)&&(0,r.jsx)("div",{className:"px-8 pb-8 pt-2",children:(0,r.jsx)("div",{className:"flex flex-col items-center justify-center space-y-3 text-center",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-xs text-muted-foreground",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:(0,r.jsx)(c.A,{className:"h-4 w-4 text-primary"})}),(0,r.jsx)("span",{children:h("secure_authentication")}),(0,r.jsx)("div",{className:"w-px h-4 bg-border"}),(0,r.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:(0,r.jsx)(o.A,{className:"h-4 w-4 text-primary"})}),(0,r.jsx)("span",{children:h("data_protection")}),(0,r.jsx)("div",{className:"w-px h-4 bg-border"}),(0,r.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:(0,r.jsx)(d.A,{className:"h-4 w-4 text-primary"})}),(0,r.jsx)("span",{children:h("verified_security")})]})})})]})]})]})}},65536:(e,t,s)=>{"use strict";s.d(t,{G8:()=>i.G8,HV:()=>i.HV,JS:()=>i.JS,Lg:()=>n,XQ:()=>o,uP:()=>i.uP});var r=s(52673),a=s(59324),i=s(49005);let n="50cd82701d75c524a38489fe8bd63742",l=[a.rCZ,a.n1,a.D8t,a.Rry],o=new r.D({networks:l,projectId:n});(0,i.sX)({adapters:[o],networks:l,metadata:{name:"Bicrypto",description:"Bicrypto is a cryptocurrency exchange platform, where you can trade Bitcoin, Ethereum, Litecoin, and other cryptocurrencies.",url:"https://mash3div.com",icons:["https://avatars.githubusercontent.com/u/179229932?s=200&v=4"]},projectId:n,themeMode:"light",features:{analytics:!0}})}}]);